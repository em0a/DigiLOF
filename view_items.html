<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Items</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .item {
            margin-bottom: 20px;
        }
        button {
            padding: 5px 10px;
            margin-left: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>View Items</h1>
    <div id="itemsList"></div>
    <button onclick="window.location.href='index.html'">Back to Home</button>

    <script>
        // Load and display the list of items from localStorage
        const itemsList = document.getElementById('itemsList');
        const logData = JSON.parse(localStorage.getItem('scannedItems')) || [];

        if (logData.length === 0) {
            itemsList.innerHTML = '<p>No items found.</p>';
        } else {
            logData.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item';
                itemDiv.innerHTML = `
                    <strong>${item.name}</strong> - <img src="${item.photo}" alt="${item.name}" style="width: 100px; height: auto;"> 
                    (Scanned at: ${item.timestamp})
                    <button onclick="editItem(${index})">Edit</button>
                    <button onclick="deleteItem(${index})">Delete</button>
                `;
                itemsList.appendChild(itemDiv);
            });
        }

        // Edit an item
        function editItem(index) {
            window.location.href = `submit_item.html?index=${index}`;
        }

        // Delete an item
        function deleteItem(index) {
            let logData = JSON.parse(localStorage.getItem('scannedItems')) || [];
            logData.splice(index, 1);  // Remove the item at the specified index
            localStorage.setItem('scannedItems', JSON.stringify(logData)); // Save updated data
            window.location.reload(); // Reload the page to reflect the changes
        }
    </script>
</body>
</html>
